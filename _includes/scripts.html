<script src="assets/js/main.min.js"></script>

{% include analytics.html %}
{% include fetch_google_scholar_stats.html %}

<script>
(function () {
  const btn = document.getElementById("theme-toggle");
  if (!btn) return;

  const apply = (mode) => {
    document.documentElement.setAttribute("data-theme", mode);
    btn.textContent = mode === "dark" ? "â˜€ï¸" : "ðŸŒ™";
  };

 const saved = localStorage.getItem("theme");

  if (saved === "dark" || saved === "light") {
    // ç”¨æˆ·ä¹‹å‰é€‰è¿‡ï¼Œä¼˜å…ˆç”¨ç”¨æˆ·é€‰æ‹©
    apply(saved);
  } else {
  // æ²¡é€‰è¿‡ï¼šé»˜è®¤å¤œé—´æ¨¡å¼
    apply("dark");
  }

  btn.addEventListener("click", (e) => {
  e.preventDefault();
  const current = document.documentElement.getAttribute("data-theme") || "light";
  const next = current === "dark" ? "light" : "dark";
  localStorage.setItem("theme", next);
  apply(next);
  });

})();
</script>
